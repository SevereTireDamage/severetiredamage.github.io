<html>
<script id="worker1" type="javascript/worker">
  // This script won't be parsed by JS engines because its type is javascript/worker.
  self.onmessage = function(e) {
    //self.postMessage('msg from worker');
  };
  // Rest of your worker code goes here.
function sayAt(x, time)
{
	setTimeout(function() {self.postMessage(x);}, time);
}
function sayAtMinute(x, time)
{
	sayAt(x, 60000*time);
}
sayAt("three", 1000);
sayAt("two", 2000);
sayAt("one", 3000);
sayAt("start", 4000);
sayAt("stop", 9000);
sayAt("three minutes", 180000);
sayAt("five minutes", 300000);
/*
sayAt("five", 5000);
setTimeout(function(){
	sayAtMinute("run one", 0);
	sayAtMinute("walk one", 1);
	sayAtMinute("run two ", 2);
	sayAtMinute("walk one", 4);
	sayAtMinute("run two", 5);
	sayAtMinute("walk one", 7);
	sayAtMinute("run one", 8);
	sayAtMinute("walk one", 9);
	sayAtMinute("and we're running", 10);
	sayAtMinute("time 20", 20);
	sayAtMinute("time 30", 30);
	sayAtMinute("time 40", 40);
},
60000);
*/
</script>
<script>
function say(x)
{
	window.speechSynthesis.speak(new SpeechSynthesisUtterance(x))
}
var blob = new Blob([
  document.querySelector('#worker1').textContent
], { type: "text/javascript" })

// Note: window.webkitURL.createObjectURL() in Chrome 10+.
var worker = new Worker(window.URL.createObjectURL(blob));
worker.onmessage = function(e) {
  console.log("Received: " + e.data);
  say(e.data);
}
worker.postMessage("hello"); // Start the worker.


</script>
</html>


